<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Glitch Friends</title>

<style>
body {
    background: #111;
    color: #0f0;
    font-family: monospace;
    text-align: center;
}
#game {
    width: 600px;
    margin: auto;
    border: 2px solid #0f0;
    padding: 10px;
    background: #000;
}
button {
    background: #0f0;
    color: #000;
    border: none;
    padding: 10px;
    margin: 5px;
    cursor: pointer;
}
button:hover {
    background: #8f8;
}
.enemy {
    color: red;
}
.dead {
    color: gray;
}
</style>
</head>

<body>

<h1>üëæ GLITCH FRIENDS üëæ</h1>

<div id="game">
    <div id="log"></div>
    <div id="buttons"></div>
</div>

<script>
// ------------------ PERSONNAGES ------------------
let team = [
    { name: "Bunny.exe", hp: 100, maxHp: 100, atk: 15 },
    { name: "Bear Toy", hp: 150, maxHp: 150, atk: 8 },
    { name: "FoxByte", hp: 80, maxHp: 80, atk: 20 },
    { name: "Cat Loop", hp: 90, maxHp: 90, atk: 6 }
];

let enemy = { name: "Bug Corrompu", hp: 200, atk: 10 };

// ------------------ INTERFACE ------------------
const log = document.getElementById("log");
const buttons = document.getElementById("buttons");

function write(text) {
    log.innerHTML += text + "<br>";
    log.scrollTop = log.scrollHeight;
}

// ------------------ JEU ------------------
function startGame() {
    write("‚ö†Ô∏è Le monde se corrompt...");
    write("üëæ Un " + enemy.name + " appara√Æt !");
    playerTurn();
}

function playerTurn() {
    buttons.innerHTML = "<h3>Choisis un personnage :</h3>";
    team.forEach((c, i) => {
        if (c.hp > 0) {
            let btn = document.createElement("button");
            btn.textContent = c.name + " (" + c.hp + " HP)";
            btn.onclick = () => attackEnemy(i);
            buttons.appendChild(btn);
        }
    });
}

function attackEnemy(index) {
    let c = team[index];
    let dmg = c.atk + Math.floor(Math.random() * 5);
    enemy.hp -= dmg;
    write("üí• " + c.name + " attaque et inflige " + dmg + " d√©g√¢ts !");
    
    if (enemy.hp <= 0) {
        write("üéâ VICTOIRE ! Le bug est corrig√©.");
        buttons.innerHTML = "";
        return;
    }

    enemyTurn();
}

function enemyTurn() {
    let alive = team.filter(c => c.hp > 0);
    let target = alive[Math.floor(Math.random() * alive.length)];
    let dmg = enemy.atk + Math.floor(Math.random() * 5);
    target.hp -= dmg;

    write("üëæ " + enemy.name + " attaque " + target.name + " (" + dmg + " d√©g√¢ts)");

    if (target.hp <= 0) {
        write("‚ò†Ô∏è " + target.name + " est KO !");
    }

    if (team.every(c => c.hp <= 0)) {
        write("üíÄ GAME OVER");
        buttons.innerHTML = "";
        return;
    }

    playerTurn();
}

// ------------------ GLITCH FUN ------------------
setInterval(() => {
    if (Math.random() < 0.1) {
        document.body.style.background =
            Math.random() < 0.5 ? "#111" : "#200";
    }
}, 500);

// ------------------ LANCEMENT ------------------
startGame();
</script>

</body>
</html>
